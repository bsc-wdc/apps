This is the Readme for:
Ocean Heat Content (ohc)

[Name]: Ocean Heat Content
[Access Level]: private
[License Agreement]: Private
[Platform]: COMPSs
[Language]: Python

[Body]
== Description ==
Ocean Heat Content is a tool that analyses the heat variations in the surface
of the sea.
Uses Numba to improve the performance of the analysis, and it is also able
to exploit the usage of GPUs.

== Versions ==
* - per_layer: base paralelized considering each layer computation as a task.
* - all_layers: simpler version that considers the computation of all task
                of each input file within a task.

== Requirements ==

* Python 2.7. or higher
* PyCOMPSs
* Numba
* Iris
* Numpy


== Execution instructions ==
Usage:
per_layer/oceanheatcontent.py <DATASET_FOLDER> <MESH_FILE> <REGIONS_FILE> <OUTPUT_FOLDER>
all_layers/oceanheatcontent.py <DATASET_FOLDER> <MESH_FILE> <REGIONS_FILE> <OUTPUT_FOLDER> <ONLY_GPU>

Where:
        * - DATASET_FOLDER: Input dataset path.
        * - MESH_FILE: Mesh file path.
        * - REGIONS_FILE: Regions file path.
        * - OUTPUT_FOLDER: Ouput folder where to store the results.
        * - ONLY_GPU: Use only GPUs (True | False). If false, uses only CPUs.

Local:
To run Ocean Heat Content locally, please use the run_local_per_layer.sh and
run_local_all_layers.sh scripts.
These scripts contain the parameters described in the previous usage subsection and invoke
the application using the COMPSs' runcompss command.
After checking the parameters of the desired version, run:
    ./run_local_per_layer.sh
or
    ./run_local_all_layers.sh


Supercomputer - CTE-Power9:

- Configuration:
The user MUST load the following modules in order to run Ocean Heat Content:

module use /gpfs/projects/bsc32/software/rhel/7.4/ppc64le/POWER9/modules/all/
module load iris
module load numba
export COMPSS_PYTHON_VERSION=none
module load COMPSs/2.5

- Job submission:
To submit a Ocean Heat Content job to CTE-Power9, please use the launch_per_layer.sh and
launch_all_layers.sh scripts.

These scripts contain the parameters described in the previous usage subsection and invoke
the application using the COMPSs' enqueue_compss command.

After checking the parameters of the desired version, run:
    ./launch_per_layer.sh
or
    ./launch_all_layers.sh

== Build ==
No build is required
